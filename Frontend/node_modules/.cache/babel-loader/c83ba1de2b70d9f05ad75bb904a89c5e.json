{"ast":null,"code":"var _jsxFileName = \"/Users/anaghasethuraman/Desktop/CMPE-273-UberEats-application-prototype Lab1  Redux copy/Frontend/src/components/Register/Register.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport { Button, Input } from 'reactstrap';\nimport { Redirect } from 'react-router';\nimport validator from 'validator';\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { userSignup, restaurantSignup } from \"../../actions/signupActions\";\n\nclass Register extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = e => {\n      e.preventDefault();\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n      console.log(this.state);\n    };\n\n    this.validateCustRegister = () => {\n      let isValid = true;\n\n      if (this.nullOrEmpty(this.state.username) || this.nullOrEmpty(this.state.email) || this.nullOrEmpty(this.state.password)) {\n        alert(\"Fields cannot be empty\");\n        isValid = false;\n      } else {\n        if (!validator.isEmail(this.state.email)) {\n          alert('Enter valid Email!');\n          isValid = false;\n        }\n\n        if (!this.state.username.match(/^[a-zA-Z ]+$/)) {\n          alert(\"Name can contain only alphabets\");\n          isValid = false;\n        }\n      }\n\n      return isValid;\n    };\n\n    this.validateOwnerRegister = () => {\n      let isValid = true;\n\n      if (this.nullOrEmpty(this.state.username) || this.nullOrEmpty(this.state.email) || this.nullOrEmpty(this.state.password) || this.nullOrEmpty(this.state.zipcode)) {\n        alert(\"Fields cannot be empty\");\n        isValid = false;\n      } else {\n        if (!validator.isEmail(this.state.email)) {\n          alert('Enter valid Email!');\n          isValid = false;\n        }\n\n        if (!this.state.username.match(/^[a-zA-Z ]+$/)) {\n          alert(\"Name can contain only alphabets\");\n          isValid = false;\n        }\n\n        if (!this.state.zipcode.match(/^[0-9]+$/)) {\n          alert(\"Zipcode can only contain numbers\");\n          isValid = false;\n        }\n      }\n\n      return isValid;\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      const buyerData = {\n        name: this.state.username,\n        email: this.state.email,\n        password: this.state.password,\n        //restaurantname: \"N/A\",\n        zipcode: \"N/A\",\n        owner: false\n      };\n      const ownerData = {\n        name: this.state.username,\n        email: this.state.email,\n        password: this.state.password,\n        //restaurantname: this.state.restaurantname,\n        zipcode: this.state.zipcode,\n        owner: true\n      }; //console.log(ownerData);\n\n      if (!this.state.owner) {\n        if (this.validateCustRegister() === true) {\n          this.props.userSignup(buyerData);\n        }\n      } else {\n        this.props.restaurantSignup(ownerData);\n\n        if (this.validateOwnerRegister() === true) {\n          this.props.restaurantSignup(ownerData);\n        }\n      }\n    };\n\n    this.switchForm = e => {\n      !this.state.owner ? this.setState({\n        owner: true\n      }) : this.setState({\n        owner: false\n      });\n    };\n\n    this.state = {};\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.switchForm = this.switchForm.bind(this);\n  }\n\n  nullOrEmpty(str) {\n    return str === null || str === \"\";\n  }\n\n  render() {\n    console.log(\"this.props\");\n    console.log(this.props.user.message);\n    localStorage.setItem(\"message\", this.props.user.message);\n    let redirectHome = null;\n    var ownerForm = null;\n    var userForm = null;\n    var accountType = \"Owner\";\n\n    if (localStorage.getItem(\"message\") === \"User Registration successful\") {\n      redirectHome = /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/Login\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 28\n        }\n      });\n    } else {\n      redirectHome = /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/Register\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 28\n        }\n      });\n    } // if(this.state.message == \"User email already registered\"){\n    //     alert(\"Email already exists\");\n    // }\n\n\n    if (this.state.owner) {\n      ownerForm = /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 17\n        }\n      }, \"Restaurant Name: \", /*#__PURE__*/React.createElement(Input, {\n        className: \"form-control\",\n        type: \"text\",\n        name: \"username\",\n        maxlength: \"30\",\n        placeholder: \"Restaurant name\",\n        value: this.state.username,\n        onChange: this.handleChange,\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 38\n        }\n      }), \"ZipCode: \", /*#__PURE__*/React.createElement(Input, {\n        className: \"form-control\",\n        type: \"number\",\n        name: \"zipcode\",\n        maxlength: \"5\",\n        placeholder: \"5 digits\",\n        value: this.state.zipcode,\n        onChange: this.handleChange,\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 30\n        }\n      })));\n      accountType = \"User\";\n    } else {\n      userForm = /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 13\n        }\n      }, \"Name:\", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 18\n        }\n      }), \" \", /*#__PURE__*/React.createElement(Input, {\n        className: \"form-control\",\n        type: \"text\",\n        name: \"username\",\n        placeholder: \"Your name\",\n        minlength: \"3\",\n        maxlength: \"30\",\n        value: this.state.username,\n        onChange: this.handleChange,\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 24\n        }\n      }));\n      accountType = \"Owner\";\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"body-login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 13\n      }\n    }, redirectHome, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"login-form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"main-div\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"panel\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 19\n      }\n    }, \"Let's get started.\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 21\n      }\n    }, \"Please enter required details to register.\")), userForm, ownerForm, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 19\n      }\n    }, \"Email: \", /*#__PURE__*/React.createElement(Input, {\n      className: \"form-control\",\n      type: \"email\",\n      name: \"email\",\n      placeholder: \"example@gmail.com\",\n      value: this.state.email,\n      onChange: this.handleChange,\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 26\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 19\n      }\n    }, \"Password: \", /*#__PURE__*/React.createElement(Input, {\n      className: \"form-control\",\n      type: \"password\",\n      name: \"password\",\n      placeholder: \"At least 6 characters\",\n      minlength: \"6\",\n      maxlength: \"16\",\n      id: \"password\",\n      value: this.state.password,\n      onChange: this.handleChange,\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      className: \"btn btn-primary\",\n      onClick: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 19\n      }\n    }, \"Register\"), \" \\xA0\", /*#__PURE__*/React.createElement(Button, {\n      onClick: this.switchForm,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 17\n      }\n    }, \"Sign Up as \", accountType)), /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 19\n      }\n    }, \"Already have an account? \", /*#__PURE__*/React.createElement(Link, {\n      to: \"/login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 48\n      }\n    }, \"Login\")), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 83\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        color: \"#ff0000\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 52\n      }\n    }, message))))));\n  }\n\n}\n\nRegister.propTypes = {\n  userSignup: PropTypes.func.isRequired,\n  user: PropTypes.object.isRequired,\n  restaurantSignup: PropTypes.func.isRequired\n};\n\nconst mapStateToProps = state => {\n  return {\n    user: state.signup.user\n  };\n};\n\nexport default connect(mapStateToProps, {\n  userSignup,\n  restaurantSignup\n})(Register);","map":{"version":3,"sources":["/Users/anaghasethuraman/Desktop/CMPE-273-UberEats-application-prototype Lab1  Redux copy/Frontend/src/components/Register/Register.js"],"names":["React","Component","axios","Link","Button","Input","Redirect","validator","PropTypes","connect","userSignup","restaurantSignup","Register","constructor","props","handleChange","e","preventDefault","setState","target","name","value","console","log","state","validateCustRegister","isValid","nullOrEmpty","username","email","password","alert","isEmail","match","validateOwnerRegister","zipcode","handleSubmit","buyerData","owner","ownerData","switchForm","bind","str","render","user","message","localStorage","setItem","redirectHome","ownerForm","userForm","accountType","getItem","color","propTypes","func","isRequired","object","mapStateToProps","signup"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport { Button ,Input} from 'reactstrap';\nimport { Redirect } from 'react-router';\nimport validator from 'validator';\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { userSignup,restaurantSignup } from \"../../actions/signupActions\";\nclass Register extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {};\n\n        this.handleChange = this.handleChange.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n        this.switchForm = this.switchForm.bind(this);\n    }\n\n    handleChange = (e) => {\n        e.preventDefault();\n        this.setState({ [e.target.name]: e.target.value });\n        console.log(this.state);\n    }\n    \n    nullOrEmpty(str) {\n        return str === null || str === \"\" \n    }\n    validateCustRegister = () => {\n        let isValid = true;\n        if(this.nullOrEmpty(this.state.username)  || this.nullOrEmpty(this.state.email) ||  this.nullOrEmpty(this.state.password)){\n        alert(\"Fields cannot be empty\");\n           isValid = false;\n        }\n        else{\n            if (!validator.isEmail(this.state.email)) {\n                alert('Enter valid Email!')\n                isValid = false;\n            }\n            \n            if(!this.state.username.match(/^[a-zA-Z ]+$/)){\n                alert(\"Name can contain only alphabets\")\n                isValid = false;\n            }\n        } \n        return isValid;\n     }\n     validateOwnerRegister = () => {\n        let isValid = true;\n        if(this.nullOrEmpty(this.state.username)  || this.nullOrEmpty(this.state.email) ||  this.nullOrEmpty(this.state.password)\n            ||this.nullOrEmpty(this.state.zipcode)) {\n        alert(\"Fields cannot be empty\");\n           isValid = false;\n        }\n        else{\n            if (!validator.isEmail(this.state.email)) {\n                alert('Enter valid Email!')\n                isValid = false;\n            }\n            if(!this.state.username.match(/^[a-zA-Z ]+$/)){\n                alert(\"Name can contain only alphabets\")\n                isValid = false;\n            }\n            if(!this.state.zipcode.match(/^[0-9]+$/)){\n                alert(\"Zipcode can only contain numbers\")\n                isValid = false;\n            }\n\n        } \n        return isValid;\n     }\n    handleSubmit = (e) => {\n        e.preventDefault();\n\n        const buyerData = {\n            name: this.state.username,\n            email: this.state.email,\n            password: this.state.password,\n            //restaurantname: \"N/A\",\n            zipcode: \"N/A\",\n            owner: false\n        }\n\n        const ownerData = {\n            name: this.state.username,\n            email: this.state.email,\n            password: this.state.password,\n            //restaurantname: this.state.restaurantname,\n            zipcode: this.state.zipcode,\n            owner: true\n        }\n        //console.log(ownerData);\n        if (!this.state.owner) {\n            if (this.validateCustRegister() === true) {           \n                this.props.userSignup(buyerData);\n              \n\n            }\n        } else {\n            this.props.restaurantSignup(ownerData);\n            if (this.validateOwnerRegister() === true) {           \n                this.props.restaurantSignup(ownerData);\n            }\n            \n        }\n\n    }\n\n    //switch between user and owner sign up form\n    switchForm = (e) => {\n        (!this.state.owner) ? this.setState({ owner: true }) : this.setState({ owner: false });\n    }\n\n    render() {\n        console.log(\"this.props\")\n        console.log(this.props.user.message)\n        localStorage.setItem(\"message\",this.props.user.message)\n        let redirectHome = null;\n        var ownerForm = null;\n        var userForm = null;\n        var accountType = \"Owner\";\n        if(localStorage.getItem(\"message\") === \"User Registration successful\"){\n            redirectHome = <Redirect to=\"/Login\" />\n            \n        }\n        else{\n            redirectHome = <Redirect to=\"/Register\" />\n           \n        }\n        \n        // if(this.state.message == \"User email already registered\"){\n        //     alert(\"Email already exists\");\n        // }\n        if (this.state.owner) {\n            ownerForm =\n            <div className=\"form-group\">\n                <div >\n                    Restaurant Name: <Input className=\"form-control\" type=\"text\" name=\"username\" maxlength=\"30\" placeholder=\"Restaurant name\" value={this.state.username} onChange={this.handleChange} required></Input>\n                    ZipCode: <Input  className=\"form-control\" type=\"number\" name=\"zipcode\" maxlength=\"5\" placeholder=\"5 digits\" value={this.state.zipcode} onChange={this.handleChange} required></Input>\n                </div>\n                </div>\n            accountType = \"User\";\n        } else{\n            userForm =\n            <div >\n            Name:<br/> <Input className=\"form-control\" type=\"text\" name=\"username\" placeholder=\"Your name\" minlength=\"3\" maxlength=\"30\" value={this.state.username} onChange={this.handleChange} required></Input>\n        </div>\n         accountType = \"Owner\";\n        }\n\n        return (\n\n\n            <div className =\"body-login\">\n                {redirectHome}\n           \n            <div className=\"container\">\n              <div className=\"login-form\">\n                <div className=\"main-div\">\n                  <div className=\"panel\">\n                  <h1>Let's get started.</h1>\n                    <p>Please enter required details to register.</p>\n                  </div>\n                  {userForm}\n                  {ownerForm}\n                  <div className=\"form-group\">\n\n                  Email: <Input   className=\"form-control\" type=\"email\" name=\"email\" placeholder=\"example@gmail.com\" value={this.state.email} onChange={this.handleChange} required></Input>\n                   \n                  </div>\n                  <div className=\"form-group\">\n\n                  Password: <Input className=\"form-control\" type=\"password\" name=\"password\" placeholder=\"At least 6 characters\" minlength=\"6\" maxlength=\"16\" id=\"password\" value={this.state.password} onChange={this.handleChange} required></Input>\n                    \n                  </div>\n                  <div className=\"form-group\">\n                  <Button className=\"btn btn-primary\" onClick={this.handleSubmit}>Register</Button> &nbsp;\n                <Button onClick={this.switchForm}>Sign Up as {accountType}</Button>\n                  </div>\n                  <h4>Already have an account? <Link to=\"/login\">Login</Link></h4><br />\n                  <div  style={{color: \"#ff0000\"}}><h4>{message}</h4></div> \n                  \n                 \n                  </div>\n                </div>\n              </div>\n            </div>\n       \n\n\n           \n          \n        )\n    }\n}\nRegister.propTypes = {\n    userSignup: PropTypes.func.isRequired,\n    user: PropTypes.object.isRequired,\n    restaurantSignup: PropTypes.func.isRequired,\n  };\n  \n  const mapStateToProps = (state) => {\n    return {\n      user: state.signup.user,\n    };\n  };\n  \n  export default connect(mapStateToProps, { userSignup ,restaurantSignup})(Register);"]},"metadata":{},"sourceType":"module"}